<!DOCTYPE html>
<html>
  <body>
    <select id="transformationFunction">
      <option value="id">identity: do not change any value</option>
      <option value="inc">increment: add one to each value</option>
      <option value="double">double: multiply each value with two</option>
    </select><br>
    <textarea id="input" cols="30" rows="10">{"raccoons":1,"super":2}</textarea>
    <textarea id="output" cols="30" rows="10"></textarea>
    <br/>
    <button type="button" onclick="generateOutput()">generate output for given input</button>
    <button type="button" onclick="generateInput()">generate input for given output</button>
    
    <script type="text/javascript" src="https://lively-kernel.org/lively4/lively4-blackbox/solve-partial.js"></script>
    <script type="text/javascript" src="https://lively-kernel.org/lively4/lively4-blackbox/solve-compound.js"></script>
    <script type="text/javascript">
      var id = function(x) {
        var result = {};
        for(var i in x) {
          result[i] = x[i];
        }
        return result;
      };
      
      var inc = function(x) {
        var result = {};
        for(var i in x) {
          result[i] = x[i]+1;
        }
        return result;
      };
      
      var double = function(x) {
        var result = {}
        for(var i in x) {
          result[i] = x[i]*2;
        }
        return result;
      };
      
      var transformation = function(x) {
        var func = document.getElementById("transformationFunction").value;
        return window[func](x);
      };
      
      function generateOutput(){
        var input = JSON.parse(document.getElementById("input").value);
        var output = transformation(input);
        document.getElementById("output").value = JSON.stringify(output);
      }
      
      function generateInput() {
        var input = JSON.parse(document.getElementById("input").value);
        var output = JSON.parse(document.getElementById("output").value);
        var targetInput = solve2(input, transformation, output);
        document.getElementById("input").value = JSON.stringify(targetInput);
      }
      //var obj0 = {"raccoons": 1, "super": 2};
      //var obj1 = {"raccoons": 50, "super": 30};
      //console.log("SOLVER SAYS:");
      //console.log(solve2(obj0, flatObjDouble, obj1));
    </script>
  </body>
</html>

