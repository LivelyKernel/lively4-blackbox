<!DOCTYPE html>
<html>
  <body>
    <script type="text/javascript" src="./genetic-js/js/genetic-0.1.14.js"></script>
    <script type="text/javascript" src="https://lively-kernel.org/lively4/lively4-blackbox/solve-partial.js"></script>
    <script type="text/javascript">
      
      // integer manipulation functions
      var inc = function(x) { return x[0]+1 };
      var double = function(x) { return x[0]*2 };
      var magic = function(x) { return (x[0]+1)*2-1 };
      var watman = function(x) { return 10*(0.1*x[0])^2-(0.1*x[0])^4+2 };
      
      // string manipulation functions
      var reverse = function(x) {
        var result = "";
        for(var i=x.length-1; i>=0; i--) {
          result += x[i];
        }
        return result;
      };
      
      var removeVowels = function(x) {
        var result = "";
        var vowels = ['a', 'e', 'i', 'o', 'u'];
        for(var i=0; i<x.length; i++) {
          if(vowels.indexOf(x[i]) > 0) {
            result += "x";
          } else {
            result += x[i];
          }
        }
        return result;
      }
      
      // onclick functions
      function solveInteger() {
        x = parseFloat(document.getElementById("solve-partial-integer-x").value);
        y = parseFloat(document.getElementById("solve-partial-integer-y").value);
        func = document.getElementById("solve-partial-integer-func").value;
        if(isNaN(x) || isNaN(y)) {
          return;
        }
        lively.notify(solveForNumberToNumber(x, window[func], y))
      }
      
      function solveString() {
        x = document.getElementById("solve-partial-string-x").value;
        y = document.getElementById("solve-partial-string-y").value;
        func = document.getElementById("solve-partial-string-func").value;
        // sanity check for now: strings do have the same length
        // (important for genetic algorithm)
        if(x.length != y.length) {
          return;
        }
        solveForStringToString(x, window[func], y).then((result) => {
          lively.notify(result);
        });
      }
    </script>
    <h3>Integers</h3>
    y = f(x) =
    <select id="solve-partial-integer-func">
      <option value="inc">x+1</option>
      <option value="double">2x</option>
      <option value="magic">2(x+1) - 1</option>
      <option value="watman">10(0.1x)^2 - (0.1x)^4 + 2</option>
    </select><br>
    x = <input type="text" id="solve-partial-integer-x"><br>
    y = <input type="text" id="solve-partial-integer-y"><br>
    <button type="button" onclick="solveInteger()">solve for x</button>
    <h3>Strings</h3>
    y = f(x) =
    <select id="solve-partial-string-func">
      <option value="reverse">reverse</option>
      <option value="removeVowels">remove vowels</option>
    </select><br>
    x = <input type="text" id="solve-partial-string-x"><br>
    y = <input type="text" id="solve-partial-string-y"><br>
    <button type="button" onclick="solveString()">solve for x</button>
  </body>
</html>